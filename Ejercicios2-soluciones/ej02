programa ej02
procesos
  proceso izquierda
  comenzar
    repetir 3
      derecha
  fin
  
  proceso contarFlores(ES flor:numero)
  comenzar
    mientras HayFlorEnLaEsquina
      tomarFlor
      flor:= flor + 1
    mientras HayFlorEnLaBolsa
      depositarFlor
  fin
  
  proceso contarPapeles(ES papel:numero)
  comenzar
    mientras HayPapelEnLaEsquina
      tomarPapel
      papel:= papel + 1
    mientras HayPapelEnLaBolsa
      depositarPapel
  fin
  
  proceso masFqueP(ES ok:boolean)
  variables
    flor, papel:numero
  comenzar
    flor:= 0
    papel:= 0
    ok:= F
    contarPapeles(papel)
    contarFlores(flor)
    si (flor > papel)
      ok:= V
  fin
  
  proceso hacerEscalones(ES contador:numero)
  variables
    ok:boolean
    alto:numero
  comenzar
    contador:= 0
    repetir 4
      Random(alto, 1, 5)
      repetir alto
        masFqueP(ok)
        si (ok)
          contador:= contador + 1
        mover
      derecha
      masFqueP(ok)
      si (ok)
        contador:= contador + 1
      mover
      masFqueP(ok)
      si (ok)
        contador:= contador + 1
      izquierda
  fin
areas
  ciudad1: AreaP(2, 1, 6, 20)
  ciudad2: AreaP(7, 1, 11, 20)
  ciudad3: AreaP(12, 1, 16, 20)
  ciudad4: AreaP(1, 1, 1, 1)
robots
  robot tipo1
  variables
    cant:numero
  comenzar
    hacerEscalones(cant)
    EnviarMensaje(cant, fiscalizador)
  fin
  
  robot tipo2
  variables
    total, cant:numero
  comenzar
    total:= 0
    repetir 3
      RecibirMensaje(cant, *)
      total:= total + cant
    Informar(total)
  fin
  
variables
  robot1: tipo1
  robot2: tipo1
  robot3: tipo1
  fiscalizador: tipo2
comenzar
  AsignarArea(robot1, ciudad1)
  AsignarArea(robot2, ciudad2)
  AsignarArea(robot3, ciudad3)
  AsignarArea(fiscalizador, ciudad4)
  Iniciar(robot1, 2, 1)
  Iniciar(robot2, 7, 1)
  Iniciar(robot3, 12, 1)
  Iniciar(fiscalizador, 1, 1)
fin